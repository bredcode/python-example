<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>To-Do List</title>
    <script>
      // ìƒíƒœ í† ê¸€
      function toggleTodo(index) {
        fetch(`/todos/${index}`, {
          method: "PUT",
        }).then(() => {
          window.location.reload();
        });
      }

      // í•  ì¼ ì‚­ì œ
      function deleteTodo(index) {
        if (confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
          fetch(`/todos/${index}`, {
            method: "DELETE",
          }).then(() => {
            window.location.reload();
          });
        }
      }
    </script>
  </head>
  <body>
    <h1>ğŸ“‹ ë‚˜ì˜ í•  ì¼ ëª©ë¡</h1>
    <form action="/todos" method="post">
      <input type="text" name="task" placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" />
      <button type="submit">ì¶”ê°€</button>
    </form>

    <ul>
      {% for todo in todos %}
      <li>
        <span onclick="toggleTodo({{ loop.index0 }})" style="cursor: pointer">
          {% if todo.done %} âœ… {{ todo.task }} {% else %} ğŸš§ {{ todo.task }} {% endif %}
        </span>
        <button onclick="deleteTodo({{ loop.index0 }})" style="margin-left: 10px">ğŸ—‘ï¸</button>
      </li>
      {% endfor %}
    </ul>
  </body>
</html>
